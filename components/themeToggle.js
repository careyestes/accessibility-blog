import classNames from "classnames";
import { useState, useEffect } from "react";
import styles from './themeToggle.module.scss';

const ThemeToggle = () => {
  const [activeTheme, setActiveTheme] = useState("light");
  const inactiveTheme = activeTheme === "light" ? "dark" : "light";

  useEffect(() => {
    const savedTheme = window.localStorage.getItem("theme");
    savedTheme && setActiveTheme(savedTheme);
  }, []);

  useEffect(() => {
    document.body.dataset.theme = activeTheme;
    window.localStorage.setItem("theme", activeTheme);
  }, [activeTheme]);

  return (
    <button 
      type="button"
      aria-label={`Change to ${inactiveTheme} mode`}
      title={`Change to ${inactiveTheme} mode`}
      className={classNames(styles.modeButton, activeTheme === "light" ? styles.lightTheme : styles.darkTheme)}
      onClick={() => setActiveTheme(inactiveTheme)}
    >
      <svg viewBox="0 0 60 60">
        <g id="Sun" className={styles.Sun}>
          <path d="M23.071106,6.465332c-6.4887695,0-11.7680664,5.2792969-11.7680664,11.7680664s5.2792969,11.7680664,11.7680664,11.7680664c6.4892578,0,11.7685547-5.2792969,11.7685547-11.7680664S29.5603638,6.465332,23.071106,6.465332z"/>
          <path d="M34.3662109,9.5791626l0.3972168-2.2527466l0.6821289-3.8687744l-3.6915283,1.3436279l-2.1495361,0.7824097C31.4724731,6.5524292,33.093811,7.9225464,34.3662109,9.5791626z"/>
          <path d="M38.3751221,13.4742432l-2.1809082-0.7937622c0.7252808,1.7073975,1.1272583,3.5840454,1.1272583,5.5529175c0,0.199585-0.0217896,0.3936768-0.0299683,0.5913086l1.7658081-1.4816895l3.0093384-2.5251465L38.3751221,13.4742432z"/>
          <path d="M37.8722534,24.3740845l-1.1644287-2.0169067c-0.6179199,2.0391235-1.6888428,3.8774414-3.0843506,5.4190063h2.2846069h3.9284058L37.8722534,24.3740845z"/>
          <path d="M25.0948486,32.3224487l1.694397,1.4217529l3.0093994,2.5251465l0.6821289-3.8687134l0.3986816-2.2609863C29.1709595,31.263855,27.2062378,32.0201416,25.0948486,32.3224487z"/>
          <path d="M15.5950928,30.3415527l0.3726196,2.1129761l0.6821289,3.8687744l3.0093994-2.5251465l1.7015381-1.4277954C19.2640381,32.1179199,17.3116455,31.4053955,15.5950928,30.3415527z"/>
          <path d="M9.5501099,22.7037354L8.506897,24.5106201l-1.9642334,3.4020996h3.9284668h2.1721802C11.2675171,26.4315796,10.2002563,24.6644897,9.5501099,22.7037354z"/>
          <path d="M8.821228,18.2333984c0-1.8806763,0.375-3.6732178,1.039917-5.3184814l-1.9633179,0.7145996l-3.6915283,1.3435669l3.0093994,2.5252075l1.6379395,1.3743896C8.8441162,18.6591797,8.821228,18.4491577,8.821228,18.2333984z"/>
          <path d="M11.7919312,9.5585938c1.2468262-1.6173096,2.824707-2.963501,4.642334-3.9248657l-2.008728-0.7311401L10.7340088,3.559021l0.6821899,3.8687134L11.7919312,9.5585938z"/>
          <path d="M23.0710449,3.9835205c1.0541992,0,2.0787354,0.1233521,3.0682983,0.3415527l-1.1037598-1.9117432l-1.9642334-3.4020996l-1.9642334,3.4020996L20.003479,4.3249512C20.9927979,4.1068115,22.0171509,3.9835205,23.0710449,3.9835205z"/>
        </g>
        <g id="Moon" className={styles.Moon}>
          <path d="M46.7779541,3.7199097c0.697998,1.7750244,1.0944214,3.7017822,1.0944214,5.7245483c0,8.6524048-7.0142212,15.666626-15.666626,15.666626c-2.9802856,0-5.7559204-0.84729-8.1278076-2.2919312c2.2877197,5.817627,7.9425049,9.9420776,14.5722046,9.9420776c8.6524658,0,15.666626-7.0142212,15.666626-15.666626C54.3167725,11.4224243,51.2921753,6.4694214,46.7779541,3.7199097z"/>
        </g>
        <g id="Stars" className={styles.Stars}>
          <circle cx="50.0112343" cy="36.1223717" r="1.3611084"/>
          <circle cx="7.316874" cy="33.4279327" r="1.7777742"/>
          <circle cx="17.6500835" cy="14.4148102" r="1.4998932"/>
          <circle cx="40.3167038" cy="8.0587006" r="1.4998932"/>
          <circle cx="37.6941071" cy="40.2253036" r="1.4998932"/>
          <circle cx="21.5033722" cy="39.3919716" r="1.4998932"/>
          <circle cx="5.706192" cy="4.9575348" r="1.4998932"/>
        </g>
        <g id="Land" className={styles.Land}>
          <path id="Land_00000031920087883781940870000013942307353950628239_" class="st0" d="M0,45.2334633c20.4828548-5.9720268,41.2135963-6.4402275,60,0v3.711647C60,55.0505562,55.0505562,60,48.9451103,60H11.0548887C4.9494419,60,0,55.0505562,0,48.9451103V45.2334633z"/>
          <g id="Outline">
            <path d="M48.9451294,0H11.0548706C4.9494629,0,0,4.9494019,0,11.0548706v34.1785889v3.7116089C0,55.0505371,4.9494629,60,11.0548706,60h37.8902588c2.3760986,0,4.5715942-0.7566528,6.3739014-2.0323486l0.0177612-0.0056763l0.0134888-0.0177002C58.1610718,55.9398804,60,52.6604004,60,48.9450684v-3.7116089V11.0548706C60,4.9494019,55.0505371,0,48.9451294,0z M1,11.0548706C1,5.5105591,5.5106201,1,11.0548706,1h37.8902588C54.4893799,1,59,5.5105591,59,11.0548706v33.8601685c-8.9169312-2.9308472-18.2547607-4.3378296-27.7924194-4.3378296v0.65625h-0.0008545l0.0008545-0.65625c-0.0004272,0-0.0008545,0-0.0012817,0C21.2614746,40.5773315,11.1045532,42.1027222,1,44.9592896V11.0548706z"/>
          </g>
        </g>
      </svg>
    </button>
  );
};

export default ThemeToggle;